<!-- 

<div class="layout-topbar">
 

    <div fxLayout="row" fxLayoutAlign="space-between center" style="color: white;">
        <img src="assets/layout/images/pwc-logo.jpg" style="width: 150px; margin-top: 3px; margin-left: 5px;" alt="PWC-logo"/>
        <b><h1 style="text-decoration: solid;">Audit Execution & Reporting</h1></b>
        <b style="cursor: pointer;"><h1><strong><i class="pi pi-user"> Profile  &nbsp;</i></strong></h1></b>
    </div>
</div>


<div>
<p-table #dt [value]="projectData" [rows]="5" [paginator]="true" [globalFilterFields]="['auditType','clientName','financialYear','status','startDate','endDate']" responsiveLayout="scroll"
 [rowHover]="true" dataKey="id"
currentPageReportTemplate="Showing {first} to {last} of {totalRecords} entries" [showCurrentPageReport]="true">
<ng-template pTemplate="caption">
    <div class="flex align-items-center justify-content-between">
        <h5 class="m-0">Manage Projects</h5>
        <span class="p-input-icon-left">
            <i class="pi pi-search"></i>
            <input pInputText type="text" (input)="dt.filterGlobal($event.target.value, 'contains')" placeholder="Search..." />
        </span>

    </div>

</ng-template>
<ng-template pTemplate="header">
    <tr>
       
        <th pSortableColumn="auditType">Audit type <p-sortIcon field="auditType"></p-sortIcon></th>
        <th pSortableColumn="clientName">Client Name <p-sortIcon field="clientName"></p-sortIcon></th>
        <th pSortableColumn="financialYear">Financial Year <p-sortIcon field="financialYear"></p-sortIcon></th>
        <th pSortableColumn="process">Process <p-sortIcon field="process"></p-sortIcon></th>
        <th pSortableColumn="subProcess">Sub Process <p-sortIcon field="subProcess"></p-sortIcon></th>
        <th pSortableColumn="status">Status <p-sortIcon field="status"></p-sortIcon></th>
        <th pSortableColumn="startDate">Start Date <p-sortIcon field="startDate"></p-sortIcon></th>
        <th pSortableColumn="endDate">End Date <p-sortIcon field="endDate"></p-sortIcon></th>
    </tr>
</ng-template>
<ng-template pTemplate="body" let-projectData >
    <tr (click)="onClick(projectData)" class="rowData">
       
        <td>{{projectData.auditType}}</td>
        <td>{{projectData.clientName}}</td>
        <td>{{projectData.financialYear}}</td>
        <td>{{projectData.process}}</td>
        <td>{{projectData.subProcess}}</td>
        <td>{{projectData.status}}</td>
        <td>{{projectData.startDate}}</td>
        <td>{{projectData.endDate}}</td>
      
    </tr>
</ng-template>
<ng-template pTemplate="summary">
    <div class="flex align-items-center justify-content-between">
        In total there are {{projectData ? projectData.length : 0 }} products.
    </div>
</ng-template>
</p-table>
</div> -->


<div>
    <div class="layout-topbar"> 

        <div fxLayout="row" fxLayoutAlign="space-between center" style="color: white;">
            <img src="assets/layout/images/pwc-logo.jpg" style="width: 150px; margin-top: 3px; margin-left: 5px;" alt="PWC-logo"/>
            <b><h1 style="text-decoration: solid;">Audit Execution & Reporting</h1></b>
            <b style="cursor: pointer;"><h1><strong><i class="pi pi-user"> Profile  &nbsp;</i></strong></h1></b>
        </div>
    </div>


    <div class="card"> 
        <p-dataView #dv [value]="projectData" [paginator]="true" [rows]="3" filterBy="name"
            layout="grid">

            <ng-template let-product pTemplate="gridItem">
                <div>
                    <div class="card1" (dblclick)="onClick(product.Id)">
                        
                        <div>
                            <div style="font-size: xx-large;">
                                <i class="pi pi-tag product-category-icon" style="font-size: 2rem"></i>
                                <span>{{product.auditType}}</span>
                            </div>
                            <br>
                            <div style="font-size: larger; font-weight: bold;">
                                <span>Client Name: {{product.clientName}}</span>
                            </div>
                        </div>
                        
                        <div>
                            <div style="font-size: larger;">
                                <span>Financial Year: {{product.financialYear}}</span>
                            </div>
                            <div style="font-size: larger;">
                                Status: {{product.status}}
                            </div>
                        </div>
                        
                        <div>
                            <div style="font-size: larger">
                                Start Date:<span>{{product.startDate}}</span>
                            </div>
                            <div style="font-size: larger">
                                End Date:<span>{{product.endDate}}</span>
                            </div>
                         </div>
                    </div>
                </div>
            </ng-template>
            </p-dataView>
<!-- <div *ngIf="orgChart"> -->
<!-- <app-org-chart></app-org-chart> -->
</div> 
<p-toast [style]="{marginTop: '80px'}"></p-toast>
<div class="card" fxLayout="row" fxLayoutAlign="center center" >
    <div class="node-header">
        <div class="p-person">
            <div class="p-organizationchart">
                <!-- <div class="department-cfo"> -->
                    <!-- <div class="department-cto"> -->
                        <!-- <div class="div department-coo"> -->
                            <!-- <h2>Organization chart</h2> -->
                            <p-organizationChart [value]="orgChartData" selectionMode="single"
                                [(selection)]="selectedNode" (onNodeSelect)="onNodeSelect($event)" styleClass="company">

                                <ng-template let-node pTemplate="person">
                                    <div class="node-header p-corner-top">{{node.label}}</div>
                                    <div class="node-content">
                                        <div>{{node.data.name}}</div>
                                    </div>
                                </ng-template>
                                <!-- <ng-template let-node pTemplate="department"> -->
                                <!-- {{node.data.name} -->
                                <!-- </ng-template> -->
                            </p-organizationChart>
                        </div>
                    </div>
                </div>
            </div>
        <!-- </div>
    </div>
</div> -->

<div class="DataTable">
    <p-table [value]="processData" dataKey="name" >
        <ng-template pTemplate="header">
            <tr>
                <th pSortableColumn="id">Process Id <p-sortIcon field="processId"></p-sortIcon></th>
                <th pSortableColumn="processName">Process <p-sortIcon field="processName"></p-sortIcon></th>
                <th pSortableColumn="processName">Sub-Process <p-sortIcon field="processName"></p-sortIcon></th>
                <th pSortableColumn="location">Location <p-sortIcon field="location"></p-sortIcon></th>
                <th pSortableColumn="status">Status <p-sortIcon field="status"></p-sortIcon></th>
                <th>Action</th>
            </tr>
        </ng-template>
        <ng-template pTemplate="body" let-processData let-expanded="expanded">
            <tr>
                <td>{{processData.refId}}</td>
                <td>{{processData.process}}</td>
                <td>{{processData.subProcess}}</td>
                <td>{{processData.location}}</td>
                <td>{{processData.status}}</td>
                <td><button [disabled]="processData.status==='Completed'" pButton (click)="processAudit(processData)"> Go For Audit</button></td>
            </tr>
        </ng-template>
        <ng-template pTemplate="rowexpansion" let-processData>
            <tr>
                <td colspan="7">
                    <div class="p-p-3">
                        <p-table [value]="processData.subProcess" dataKey="id">
                            <ng-template pTemplate="header">
                                <tr>
                                    <th pSortableColumn="subProcess">Sub Process <p-sortIcon field="subProcess"></p-sortIcon></th>
                                    <th>Status</th>
                                </tr>
                            </ng-template>
                            <ng-template pTemplate="body" let-subProcessData>
                                <tr>
                                    <td>{{subProcessData.subProcessName}}</td>
                                    <td>{{processData.status}}</td>
                                </tr>
                            </ng-template>
                            <ng-template pTemplate="emptymessage">
                                <tr>
                                    <td colspan="6">There are no sub-processes for this Process yet.</td>
                                </tr>
                            </ng-template>
                        </p-table>
                    </div>
                </td>
            </tr>
        </ng-template>
    </p-table>
</div>

<br><br><br><br>
</div>